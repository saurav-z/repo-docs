# Enhanced FaaS Access in China: Boost Your Website Speed & Stability

This project enhances the access speed and stability of websites hosted on Cloudflare, Vercel, or Netlify in China by optimizing DNS CNAME records.  [Visit the original repository](https://github.com/xingpingcn/enhanced-FaaS-in-China) for more details.

![Stars](https://img.shields.io/github/stars/xingpingcn/enhanced-FaaS-in-China?style=flat)
![Last Commit](https://img.shields.io/github/last-commit/xingpingcn/enhanced-FaaS-in-China?display_timestamp=author&style=flat)
[![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fxingpingcn%2Fenhanced-FaaS-in-China&count_bg=%236167ED&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits-since-2024-7-8&edge_flat=false)](https://hits.seeyoufarm.com)

## Key Features

*   **Improved Access Speed:** Optimize website loading times for visitors in China.
*   **Enhanced Stability:** Reduce downtime and ensure reliable access to your site.
*   **Simple Configuration:** Easily implement the optimization by changing your CNAME record.
*   **Supports Popular Platforms:** Works with Vercel, Netlify, and Cloudflare.
*   **Dynamic IP Selection:**  Continuously monitors and updates IP addresses for optimal performance.

## How to Use

To improve website access speed and stability in China, simply update the CNAME record for your domain:

> **Important:** Before using these CNAME records, ensure your SSL/TLS certificate is generated by the platform you're using (Vercel, Netlify).

*   **Vercel:**  `vercel-cname.xingpingcn.top`
*   **Netlify:** `netlify-cname.xingpingcn.top`
*   **Vercel and Netlify (Combined):** `verlify-cname.xingpingcn.top`
*   **Cloudflare:** `cf-cname.xingpingcn.top`
    *   **Note:**  If your domain is hosted on Cloudflare, using this CNAME might result in 403 errors. It's recommended to host your domain on a different DNS provider. Alternatively, consider using Cloudflare's SaaS feature (see documentation for details).

## Troubleshooting & FAQs

**Q: Why is the speed not as fast as the benchmark?**
**A:** Possible causes include testing platform issues, domain reputation problems, or issues with the origin server. Consider using multiple testing platforms and ensuring your domain isn't on a blacklist.

**Q: Why can't I access my website after changing the CNAME?**
**A:** This is often due to issues with SSL/TLS certificates when using `verlify-cname.xingpingcn.top`. Ensure the certificate is generated by the platform first, or use custom or auto-renewing certificates.

<details>
<summary><b>Q: What is the difference from the official CNAME?</b></summary>
<br>
A: The official CNAME might be faster on average, but this project prioritizes stability by using faster IP addresses,  aiming for average response times below 1 second and controlling the number of provinces with response times above 2 seconds.
</details>

<details>
<summary><b>Q: Why is the route parsing inaccurate?</b></summary><br>
A: The author uses authoritative DNS server-based route parsing, which might be inaccurate. If you desire more precise route parsing, you can choose other DNS servers (e.g. dnspod) and add the IP addresses from Netlify.json or Vercel.json to the A record. You can also use NS1.COM as the authoritative DNS server and set up route parsing according to the ASN. You can see the ASN list here: [ASN list](https://github.com/xingpingcn/china-mainland-asn).
</details>

<details>
<summary><b>Q: Why is the default IP provided by the official for some routes (e.g. Telecom)?</b></summary><br>
A: Because the other IP addresses of that route are poor in quality, the parsing of this route is temporarily stopped, and the default IP provided by the official is used instead. You can improve the fault tolerance by deploying websites on vercel and netlify simultaneously and changing the CNAME parsing to verlify-cname.xingpingcn.top. The probability that the same route fails at the same time in two platforms is much lower.
</details>

<details>
<summary><b>Q: Why is the IP list empty for some routes in the json file?</b></summary><br>
A: Same as above.
</details>

## Speed Comparison & Benchmarks

[See the detailed speed comparison and test results in the original README for performance insights.  The images demonstrate performance improvements during peak hours.]

## How It Works

The project monitors the speeds of the IPs for Cloudflare, Vercel, and Netlify to select stable and fast IPs, and add them to the A record of your domain. The IP is updated roughly every 40 minutes.

## Customization

If you need to integrate with other platforms like Render or Railway, you will need to create a new testing script within the `crawler.py` file.

## Star History

[![Stargazers over time](https://starchart.cc/xingpingcn/enhanced-FaaS-in-China.svg?background=%23FFFFFF&axis=%23333333&line=%23ff63db)](https://starchart.cc/xingpingcn/enhanced-FaaS-in-China)